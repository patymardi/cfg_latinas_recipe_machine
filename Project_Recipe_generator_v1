import requests
import os
# Register to get an API key https://developer.edamam.com/edamam-recipe-api
api_id = os.environ.get("edamam_api_id")
api_key = os.environ.get("edamam_api_key")

def recipe_search (ingredient):
    result = requests.get('https://api.edamam.com/search?q={}&app_id={}&app_key={}'.format(ingredient, api_id, api_key))
    data = result.json()
    return data['hits']

def run ():
    ingredient = input("Hello! What ingredients do you want to cook? ")
    dietary_requirements = input("Do you have any dietary requirements? y/n  ")
    if dietary_requirements == "y":
        diet_specifics = input("Please enter your requirements. e.g. Vegan, vegetarian, gluten-free...  ")
    elif dietary_requirements == "n":
        diet_specifics = "none"
    dish_type = input("What type of dish are you craving for? e.g. Soup, Salad, Main meal... ")
    print()
    print("With the ingredients {}, taking into account you eat {} food, we found the following recipes for your {}: ".format(ingredient, diet_specifics, dish_type))

    recipes = recipe_search(ingredient)
    i = 0

    for recipe in recipes:
        i = i +1
        print(i, recipe['recipe']['label'])
        print(recipe['recipe']['url'])
        print()
    print("In total you have {} options of recipes".format(i))

run()

ask_export = input("Would you like to export one? y/n   ")
if ask_export == "y":
    chosen_recipe = float(input("Which one do you want to export? (Just write the number)   "))
elif ask_export == "n":
        print("All right, good luck with your cooking!")





##### The following has not been tested yet ######



with open('Recipes_results.txt', 'w+') as write_results:
    recipe_log = recipes

    write_results.write(recipe_search(ingredient))

with open('Recipes_results.txt', 'r') as read_list:
    recipe_log = read_list.read()

print("These are the recipes you found")
print(recipe_log)
