import requests
import os
# Register to get an API key https://developer.edamam.com/edamam-recipe-api
api_id = os.environ.get("edamam_api_id")
api_key = os.environ.get("edamam_api_key")

def recipe_search (ingredient, Health, Diet):
    result = requests.get('https://api.edamam.com/search?q={}&Health={}&Diet={}&app_id={}&app_key={}'.format(ingredient, Health, Diet, api_id, api_key))
    data = result.json()
    return data['hits']

### Diet- balanced, high-protein,  low-carb, low-fat
### Health- vegan,  vegetarian, sugar-conscious, peanut-free, tree-nut-free,  alcohol-free

def run ():
    ingredient = input("Hello! What ingredients do you want to cook? ")
    dietary_requirements = input("Do you have any dietary requirements? y/n  ")
    if dietary_requirements == "y":
        Health = input("Please enter your requirements: vegan,  vegetarian, sugar-conscious, peanut-free, tree-nut-free or alcohol-free  ")
        Diet = input("What diet type are you following?  balanced, high-protein, low-carb, low-fat   ")

    print()
    print("With the ingredients: {}, taking into account you want {} food, we found the following {} recipes for you : ".format(ingredient, Health, Diet))

    recipes = recipe_search(ingredient, Health, Diet)
    i = 0

    for recipe in recipes:
        i = i +1
        print(i, recipe['recipe']['label'])
        print(recipe['recipe']['url'])
        print()
    print("In total you have {} options of recipes".format(i))

run()

ask_export = input("Would you like to export one? y/n   ")
if ask_export == "y":
    chosen_recipe = float(input("Which one do you want to export? (Just write the number)   "))
elif ask_export == "n":
        print("All right, good luck with your cooking!")

